{"version":3,"sources":["../../../node_modules/@gmod/indexedfasta/dist/localFile.js","../../../node_modules/@gmod/indexedfasta/dist/indexedFasta.js","../../../node_modules/@babel/runtime/helpers/toArray.js","../../../node_modules/browser-or-node/lib/index.js","../../../node_modules/@gmod/indexedfasta/dist/bgzipIndexedFasta.js","../../../node_modules/@gmod/indexedfasta/dist/index.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","fsOpen","fsRead","fsFStat","fsReadFile","_regenerator","_typeof2","_asyncToGenerator2","_classCallCheck2","_createClass2","promisify","isNode","fs","open","read","fstat","readFile","LocalFile","source","this","position","filename","fd","key","_read","mark","_callee","buffer","offset","length","ret","_args","arguments","wrap","_context","prev","next","undefined","t0","t1","sent","t2","t3","t4","t5","abrupt","bytesRead","stop","_x","apply","_readFile","_callee2","_context2","_stat","_callee3","_context3","_localFile","_faiOffset","idx","pos","lineBytes","Math","floor","lineLength","IndexedFasta","_ref","fasta","fai","path","faiPath","_ref$chunkSizeLimit","chunkSizeLimit","concat","_getIndexes2","opts","indexes","_readFAI","_readFAI2","text","idCounter","currSeq","data","Error","toString","split","filter","line","test","map","row","name","id","start","end","fromEntries","entry","_x2","_getSequenceNames","_getIndexes","keys","call","_x3","_getSequenceSizes","_callee4","returnObject","vals","i","_context4","values","_x4","_getSequenceSize","_callee5","seqName","_context5","_x5","_x6","_hasReferenceSequence","_callee6","_context6","_x7","_x8","_getResiduesById","_callee7","seqId","min","max","indexEntry","_context7","_fetchFromIndexEntry","_x9","_x10","_x11","_x12","_getResiduesByName","_callee8","_context8","_x13","_x14","_x15","_x16","_getSequence","_callee9","_args9","_context9","getResiduesByName","_fetchFromIndexEntry2","_callee10","readlen","residues","_args10","_context10","TypeError","toLocaleString","Buffer","allocUnsafe","replace","_x17","arrayWithHoles","iterableToArray","unsupportedIterableToArray","nonIterableRest","module","arr","__esModule","_typeof","Symbol","iterator","obj","constructor","prototype","isBrowser","window","document","isWebWorker","self","process","versions","node","isJsDom","navigator","userAgent","includes","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_bgzfFilehandle","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","e","_isNativeReflectConstruct","result","Super","NewTarget","BgzipIndexedFasta","_IndexedFasta","_super","_this","gzi","gziPath","BgzfFilehandle","filehandle","gziFilehandle","parseSmallFasta","enumerable","get","_bgzipIndexedFasta","_indexedFasta","FetchableSmallFasta","_toArray2","_object","t","entryText","_entryText$split","_entryText$split2","defLine","seqLines","slice","_defLine$split","_defLine$split2","description","sequence","join","shim","then","_fetch","find","iter","substr"],"mappings":"wHAEA,IAAIA,EAAyBC,EAAQ,IAErCC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAQE,aAAU,EAElB,IAiBIC,EACAC,EACAC,EACAC,EApBAC,EAAeX,EAAuBC,EAAQ,MAE9CW,EAAWZ,EAAuBC,EAAQ,MAE1CY,EAAqBb,EAAuBC,EAAQ,MAEpDa,EAAmBd,EAAuBC,EAAQ,MAElDc,EAAgBf,EAAuBC,EAAQ,MAG/Ce,EADWf,EAAQ,KACEe,UAWzB,GATgBf,EAAQ,MACDgB,OAQX,CAEV,IAAIC,EAAKjB,EAAQ,KAEjBM,EAASW,GAAMF,EAAUE,EAAGC,MAC5BX,EAASU,GAAMF,EAAUE,EAAGE,MAC5BX,EAAUS,GAAMF,EAAUE,EAAGG,OAC7BX,EAAaQ,GAAMF,EAAUE,EAAGI,UAGlC,IAAIC,EAAyB,WAC3B,SAASA,EAAUC,IACjB,EAAIV,EAAiBR,SAASmB,KAAMF,GACpCE,KAAKC,SAAW,EAChBD,KAAKE,SAAWH,EAChBC,KAAKG,GAAKrB,EAAOkB,KAAKE,SAAU,KAsIlC,OAnIA,EAAIZ,EAAcT,SAASiB,EAAW,CAAC,CACrCM,IAAK,OACLxB,MAAO,WACL,IAAIyB,GAAQ,EAAIjB,EAAmBP,SAAuBK,EAAaL,QAAQyB,MAAK,SAASC,EAAQC,GACnG,IAAIC,EACAC,EACAT,EAEAU,EACAC,EAAQC,UACZ,OAAO3B,EAAaL,QAAQiC,MAAK,SAAkBC,GACjD,OACE,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EAaH,OAZAR,EAASG,EAAMF,OAAS,QAAkBQ,IAAbN,EAAM,GAAmBA,EAAM,GAAK,EACjEF,EAASE,EAAMF,OAAS,EAAIE,EAAM,QAAKM,EACvCjB,EAAWW,EAAMF,OAAS,EAAIE,EAAM,QAAKM,EAGpB,OAFNjB,IAGED,KAAKC,SACpBD,KAAKC,UAAYS,GAGnBK,EAASI,GAAKpC,EACdgC,EAASE,KAAO,EACTjB,KAAKG,GAEd,KAAK,EAOH,OANAY,EAASK,GAAKL,EAASM,KACvBN,EAASO,GAAKd,EACdO,EAASQ,GAAKd,EACdM,EAASS,GAAKd,EACdK,EAASU,GAAKxB,EACdc,EAASE,KAAO,IACT,EAAIF,EAASI,IAAIJ,EAASK,GAAIL,EAASO,GAAIP,EAASQ,GAAIR,EAASS,GAAIT,EAASU,IAEvF,KAAK,GAGH,GAFAd,EAAMI,EAASM,KAEsB,YAA/B,EAAIlC,EAASN,SAAS8B,GAAoB,CAC9CI,EAASE,KAAO,GAChB,MAGF,OAAOF,EAASW,OAAO,SAAUf,EAAIgB,WAEvC,KAAK,GACH,OAAOZ,EAASW,OAAO,SAAUf,GAEnC,KAAK,GACL,IAAK,MACH,OAAOI,EAASa,UAGrBrB,EAASP,UAOd,OAJA,SAAc6B,GACZ,OAAOxB,EAAMyB,MAAM9B,KAAMa,YAzDtB,IA8DN,CACDT,IAAK,WACLxB,MAAO,WACL,IAAImD,GAAY,EAAI3C,EAAmBP,SAAuBK,EAAaL,QAAQyB,MAAK,SAAS0B,IAC/F,OAAO9C,EAAaL,QAAQiC,MAAK,SAAmBmB,GAClD,OACE,OAAQA,EAAUjB,KAAOiB,EAAUhB,MACjC,KAAK,EACH,OAAOgB,EAAUP,OAAO,SAAUzC,EAAWe,KAAKE,WAEpD,KAAK,EACL,IAAK,MACH,OAAO+B,EAAUL,UAGtBI,EAAUhC,UAOf,OAJA,WACE,OAAO+B,EAAUD,MAAM9B,KAAMa,YAjB1B,IAsBN,CACDT,IAAK,OACLxB,MAAO,WACL,IAAIsD,GAAQ,EAAI9C,EAAmBP,SAAuBK,EAAaL,QAAQyB,MAAK,SAAS6B,IAC3F,OAAOjD,EAAaL,QAAQiC,MAAK,SAAmBsB,GAClD,OACE,OAAQA,EAAUpB,KAAOoB,EAAUnB,MACjC,KAAK,EACH,GAAIjB,KAAKkC,MAAO,CACdE,EAAUnB,KAAO,EACjB,MAKF,OAFAmB,EAAUjB,GAAKnC,EACfoD,EAAUnB,KAAO,EACVjB,KAAKG,GAEd,KAAK,EAGH,OAFAiC,EAAUhB,GAAKgB,EAAUf,KACzBe,EAAUnB,KAAO,GACV,EAAImB,EAAUjB,IAAIiB,EAAUhB,IAErC,KAAK,EACHpB,KAAKkC,MAAQE,EAAUf,KAEzB,KAAK,EACH,OAAOe,EAAUV,OAAO,SAAU1B,KAAKkC,OAEzC,KAAK,EACL,IAAK,MACH,OAAOE,EAAUR,UAGtBO,EAAUnC,UAOf,OAJA,WACE,OAAOkC,EAAMJ,MAAM9B,KAAMa,YAnCtB,MAyCFf,EA3IoB,GA8I7BnB,EAAQE,QAAUiB,G,mCCvLlB,YAEA,IAAIvB,EAAyBC,EAAQ,IAErCC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAQE,aAAU,EAElB,IAAIK,EAAeX,EAAuBC,EAAQ,MAE9CY,EAAqBb,EAAuBC,EAAQ,MAEpDa,EAAmBd,EAAuBC,EAAQ,MAElDc,EAAgBf,EAAuBC,EAAQ,MAE/C6D,EAAa9D,EAAuBC,EAAQ,OAEhD,SAAS8D,EAAWC,EAAKC,GACvB,OAAOD,EAAI9B,OAAS8B,EAAIE,UAAYC,KAAKC,MAAMH,EAAMD,EAAIK,YAAcJ,EAAMD,EAAIK,WAGnF,IAAIC,EAA4B,WAC9B,SAASA,EAAaC,GACpB,IAAIC,EAAQD,EAAKC,MACbC,EAAMF,EAAKE,IACXC,EAAOH,EAAKG,KACZC,EAAUJ,EAAKI,QACfC,EAAsBL,EAAKM,eAC3BA,OAAyC,IAAxBD,EAAiC,IAAUA,GAChE,EAAI9D,EAAiBR,SAASmB,KAAM6C,GAEhCE,EACF/C,KAAK+C,MAAQA,EACJE,IACTjD,KAAK+C,MAAQ,IAAIV,EAAWxD,QAAQoE,IAGlCD,EACFhD,KAAKgD,IAAMA,EACFE,EACTlD,KAAKgD,IAAM,IAAIX,EAAWxD,QAAQqE,GACzBD,IACTjD,KAAKgD,IAAM,IAAIX,EAAWxD,QAAQ,GAAGwE,OAAOJ,EAAM,UAGpDjD,KAAKoD,eAAiBA,EAycxB,OAtcA,EAAI9D,EAAcT,SAASgE,EAAc,CAAC,CACxCzC,IAAK,cACLxB,MAAO,WACL,IAAI0E,GAAe,EAAIlE,EAAmBP,SAAuBK,EAAaL,QAAQyB,MAAK,SAASC,EAAQgD,GAC1G,OAAOrE,EAAaL,QAAQiC,MAAK,SAAkBC,GACjD,OACE,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EACH,GAAIjB,KAAKwD,QAAS,CAChBzC,EAASE,KAAO,EAChB,MAIF,OADAF,EAASE,KAAO,EACTjB,KAAKyD,SAASF,GAEvB,KAAK,EACHvD,KAAKwD,QAAUzC,EAASM,KAE1B,KAAK,EACH,OAAON,EAASW,OAAO,SAAU1B,KAAKwD,SAExC,KAAK,EACL,IAAK,MACH,OAAOzC,EAASa,UAGrBrB,EAASP,UAOd,OAJA,SAAqB6B,GACnB,OAAOyB,EAAaxB,MAAM9B,KAAMa,YA7B7B,IAkCN,CACDT,IAAK,WACLxB,MAAO,WACL,IAAI8E,GAAY,EAAItE,EAAmBP,SAAuBK,EAAaL,QAAQyB,MAAK,SAAS0B,EAASuB,GACxG,IAAII,EAAMC,EAAWC,EAASC,EAC9B,OAAO5E,EAAaL,QAAQiC,MAAK,SAAmBmB,GAClD,OACE,OAAQA,EAAUjB,KAAOiB,EAAUhB,MACjC,KAAK,EAEH,OADAgB,EAAUhB,KAAO,EACVjB,KAAKgD,IAAInD,SAAS0D,GAE3B,KAAK,EAGH,IAFAI,EAAO1B,EAAUZ,OAELsC,EAAKjD,OAAQ,CACvBuB,EAAUhB,KAAO,EACjB,MAGF,MAAM,IAAI8C,MAAM,4CAElB,KAAK,EA4BH,OA3BAH,EAAY,EACZE,EAAOH,EAAKK,SAAS,QAAQC,MAAM,SAASC,QAAO,SAAUC,GAC3D,MAAO,KAAKC,KAAKD,MAChBE,KAAI,SAAUF,GACf,OAAOA,EAAKF,MAAM,SACjBC,QAAO,SAAUI,GAClB,MAAkB,KAAXA,EAAI,MACVD,KAAI,SAAUC,GASf,OARKT,GAAWA,EAAQU,OAASD,EAAI,KACnCT,EAAU,CACRU,KAAMD,EAAI,GACVE,GAAIZ,GAENA,GAAa,GAGR,CACLY,GAAIX,EAAQW,GACZD,KAAMD,EAAI,GACV5D,QAAS4D,EAAI,GACbG,MAAO,EACPC,KAAMJ,EAAI,GACV7D,QAAS6D,EAAI,GACb1B,YAAa0B,EAAI,GACjB7B,WAAY6B,EAAI,OAGbrC,EAAUP,OAAO,SAAU,CAChC6C,KAAM9F,OAAOkG,YAAYb,EAAKO,KAAI,SAAUO,GAC1C,MAAO,CAACA,EAAML,KAAMK,OAEtBJ,GAAI/F,OAAOkG,YAAYb,EAAKO,KAAI,SAAUO,GACxC,MAAO,CAACA,EAAMJ,GAAII,SAIxB,KAAK,EACL,IAAK,MACH,OAAO3C,EAAUL,UAGtBI,EAAUhC,UAOf,OAJA,SAAkB6E,GAChB,OAAOnB,EAAU5B,MAAM9B,KAAMa,YAlE1B,IA8EN,CACDT,IAAK,mBACLxB,MAAO,WACL,IAAIkG,GAAoB,EAAI1F,EAAmBP,SAAuBK,EAAaL,QAAQyB,MAAK,SAAS6B,EAASoB,GAChH,OAAOrE,EAAaL,QAAQiC,MAAK,SAAmBsB,GAClD,OACE,OAAQA,EAAUpB,KAAOoB,EAAUnB,MACjC,KAAK,EAGH,OAFAmB,EAAUjB,GAAK1C,OACf2D,EAAUnB,KAAO,EACVjB,KAAK+E,YAAYxB,GAE1B,KAAK,EAEH,OADAnB,EAAUhB,GAAKgB,EAAUf,KAAKkD,KACvBnC,EAAUV,OAAO,SAAUU,EAAUjB,GAAG6D,KAAKC,KAAK7C,EAAUjB,GAAIiB,EAAUhB,KAEnF,KAAK,EACL,IAAK,MACH,OAAOgB,EAAUR,UAGtBO,EAAUnC,UAOf,OAJA,SAA0BkF,GACxB,OAAOJ,EAAkBhD,MAAM9B,KAAMa,YAvBlC,IAmCN,CACDT,IAAK,mBACLxB,MAAO,WACL,IAAIuG,GAAoB,EAAI/F,EAAmBP,SAAuBK,EAAaL,QAAQyB,MAAK,SAAS8E,EAAS7B,GAChH,IAAI8B,EAAc9C,EAAK+C,EAAMC,EAC7B,OAAOrG,EAAaL,QAAQiC,MAAK,SAAmB0E,GAClD,OACE,OAAQA,EAAUxE,KAAOwE,EAAUvE,MACjC,KAAK,EAGH,OAFAoE,EAAe,GACfG,EAAUvE,KAAO,EACVjB,KAAK+E,YAAYxB,GAE1B,KAAK,EAIH,IAHAhB,EAAMiD,EAAUnE,KAChBiE,EAAO7G,OAAOgH,OAAOlD,EAAIiC,IAEpBe,EAAI,EAAGA,EAAID,EAAK5E,OAAQ6E,GAAK,EAChCF,EAAaC,EAAKC,GAAGhB,MAAQe,EAAKC,GAAG7E,OAGvC,OAAO8E,EAAU9D,OAAO,SAAU2D,GAEpC,KAAK,EACL,IAAK,MACH,OAAOG,EAAU5D,UAGtBwD,EAAUpF,UAOf,OAJA,SAA0B0F,GACxB,OAAOP,EAAkBrD,MAAM9B,KAAMa,YA9BlC,IA0CN,CACDT,IAAK,kBACLxB,MAAO,WACL,IAAI+G,GAAmB,EAAIvG,EAAmBP,SAAuBK,EAAaL,QAAQyB,MAAK,SAASsF,EAASC,EAAStC,GACxH,IAAIhB,EACJ,OAAOrD,EAAaL,QAAQiC,MAAK,SAAmBgF,GAClD,OACE,OAAQA,EAAU9E,KAAO8E,EAAU7E,MACjC,KAAK,EAEH,OADA6E,EAAU7E,KAAO,EACVjB,KAAK+E,YAAYxB,GAE1B,KAAK,EAEH,OADAhB,EAAMuD,EAAUzE,KACTyE,EAAUpE,OAAO,UAAWa,EAAIgC,KAAKsB,IAAY,IAAInF,QAE9D,KAAK,EACL,IAAK,MACH,OAAOoF,EAAUlE,UAGtBgE,EAAU5F,UAOf,OAJA,SAAyB+F,EAAKC,GAC5B,OAAOL,EAAiB7D,MAAM9B,KAAMa,YAvBjC,IAkCN,CACDT,IAAK,uBACLxB,MAAO,WACL,IAAIqH,GAAwB,EAAI7G,EAAmBP,SAAuBK,EAAaL,QAAQyB,MAAK,SAAS4F,EAAS3B,EAAMhB,GAC1H,OAAOrE,EAAaL,QAAQiC,MAAK,SAAmBqF,GAClD,OACE,OAAQA,EAAUnF,KAAOmF,EAAUlF,MACjC,KAAK,EAEH,OADAkF,EAAUlF,KAAO,EACVjB,KAAK+E,YAAYxB,GAE1B,KAAK,EAEH,OADA4C,EAAUhF,GAAKoD,EACR4B,EAAUzE,OAAO,WAAYyE,EAAU9E,KAAKkD,KAAK4B,EAAUhF,KAEpE,KAAK,EACL,IAAK,MACH,OAAOgF,EAAUvE,UAGtBsE,EAAUlG,UAOf,OAJA,SAA8BoG,EAAKC,GACjC,OAAOJ,EAAsBnE,MAAM9B,KAAMa,YAtBtC,IAkCN,CACDT,IAAK,kBACLxB,MAAO,WACL,IAAI0H,GAAmB,EAAIlH,EAAmBP,SAAuBK,EAAaL,QAAQyB,MAAK,SAASiG,EAASC,EAAOC,EAAKC,EAAKnD,GAChI,IAAIoD,EACJ,OAAOzH,EAAaL,QAAQiC,MAAK,SAAmB8F,GAClD,OACE,OAAQA,EAAU5F,KAAO4F,EAAU3F,MACjC,KAAK,EAEH,OADA2F,EAAU3F,KAAO,EACVjB,KAAK+E,YAAYxB,GAE1B,KAAK,EAIH,GAHAqD,EAAUzF,GAAKqF,EACfG,EAAaC,EAAUvF,KAAKmD,GAAGoC,EAAUzF,IAEzB,CACdyF,EAAU3F,KAAO,EACjB,MAGF,OAAO2F,EAAUlF,OAAO,cAAUR,GAEpC,KAAK,EACH,OAAO0F,EAAUlF,OAAO,SAAU1B,KAAK6G,qBAAqBF,EAAYF,EAAKC,IAE/E,KAAK,EACL,IAAK,MACH,OAAOE,EAAUhF,UAGtB2E,EAAUvG,UAOf,OAJA,SAAyB8G,EAAKC,EAAMC,EAAMC,GACxC,OAAOX,EAAiBxE,MAAM9B,KAAMa,YAjCjC,IA4CN,CACDT,IAAK,oBACLxB,MAAO,WACL,IAAIsI,GAAqB,EAAI9H,EAAmBP,SAAuBK,EAAaL,QAAQyB,MAAK,SAAS6G,EAAStB,EAASY,EAAKC,EAAKnD,GACpI,IAAIoD,EACJ,OAAOzH,EAAaL,QAAQiC,MAAK,SAAmBsG,GAClD,OACE,OAAQA,EAAUpG,KAAOoG,EAAUnG,MACjC,KAAK,EAEH,OADAmG,EAAUnG,KAAO,EACVjB,KAAK+E,YAAYxB,GAE1B,KAAK,EAIH,GAHA6D,EAAUjG,GAAK0E,EACfc,EAAaS,EAAU/F,KAAKkD,KAAK6C,EAAUjG,IAE3B,CACdiG,EAAUnG,KAAO,EACjB,MAGF,OAAOmG,EAAU1F,OAAO,cAAUR,GAEpC,KAAK,EACH,OAAOkG,EAAU1F,OAAO,SAAU1B,KAAK6G,qBAAqBF,EAAYF,EAAKC,EAAKnD,IAEpF,KAAK,EACL,IAAK,MACH,OAAO6D,EAAUxF,UAGtBuF,EAAUnH,UAOf,OAJA,SAA2BqH,EAAMC,EAAMC,EAAMC,GAC3C,OAAON,EAAmBpF,MAAM9B,KAAMa,YAjCnC,IAsCN,CACDT,IAAK,cACLxB,MAAO,WACL,IAAI6I,GAAe,EAAIrI,EAAmBP,SAAuBK,EAAaL,QAAQyB,MAAK,SAASoH,IAClG,IAAIC,EAAS9G,UACb,OAAO3B,EAAaL,QAAQiC,MAAK,SAAmB8G,GAClD,OACE,OAAQA,EAAU5G,KAAO4G,EAAU3G,MACjC,KAAK,EACH,OAAO2G,EAAUlG,OAAO,SAAU1B,KAAK6H,kBAAkB/F,MAAM9B,KAAM2H,IAEvE,KAAK,EACL,IAAK,MACH,OAAOC,EAAUhG,UAGtB8F,EAAU1H,UAOf,OAJA,WACE,OAAOyH,EAAa3F,MAAM9B,KAAMa,YAlB7B,IAuBN,CACDT,IAAK,uBACLxB,MAAO,WACL,IAAIkJ,GAAwB,EAAI1I,EAAmBP,SAAuBK,EAAaL,QAAQyB,MAAK,SAASyH,EAAUpB,GACrH,IAAIF,EACAC,EACAnD,EACAmB,EACAzE,EACA+H,EACAC,EACAC,EAAUrH,UACd,OAAO3B,EAAaL,QAAQiC,MAAK,SAAoBqH,GACnD,OACE,OAAQA,EAAWnH,KAAOmH,EAAWlH,MACnC,KAAK,EAMH,GALAwF,EAAMyB,EAAQxH,OAAS,QAAoBQ,IAAfgH,EAAQ,GAAmBA,EAAQ,GAAK,EACpExB,EAAMwB,EAAQxH,OAAS,EAAIwH,EAAQ,QAAKhH,EACxCqC,EAAO2E,EAAQxH,OAAS,EAAIwH,EAAQ,QAAKhH,EACzCwD,EAAMgC,IAEAD,EAAM,GAAI,CACd0B,EAAWlH,KAAO,EAClB,MAGF,MAAM,IAAImH,UAAU,qCAEtB,KAAK,EAKH,SAJYlH,IAARwD,GAAqBA,EAAMiC,EAAWjG,UACxCgE,EAAMiC,EAAWjG,UAGb+F,GAAO/B,GAAM,CACjByD,EAAWlH,KAAO,EAClB,MAGF,OAAOkH,EAAWzG,OAAO,SAAU,IAErC,KAAK,EAIH,GAHAzB,EAAWqC,EAAWqE,EAAYF,MAClCuB,EAAU1F,EAAWqE,EAAYjC,GAAOzE,GAExBD,KAAKoD,gBAAiB,CACpC+E,EAAWlH,KAAO,GAClB,MAGF,MAAM,IAAI8C,MAAM,gBAAgBV,OAAO2E,EAAQK,iBAAkB,wCAAwChF,OAAOrD,KAAKoD,eAAeiF,iBAAkB,WAExJ,KAAK,GAGH,OAFAJ,EAAWK,EAAOC,YAAYP,GAC9BG,EAAWlH,KAAO,GACXjB,KAAK+C,MAAMpD,KAAKsI,EAAU,EAAGD,EAAS/H,EAAUsD,GAEzD,KAAK,GACH,OAAO4E,EAAWzG,OAAO,SAAUuG,EAASjE,SAAS,QAAQwE,QAAQ,OAAQ,KAE/E,KAAK,GACL,IAAK,MACH,OAAOL,EAAWvG,UAGvBmG,EAAW/H,UAOhB,OAJA,SAA8ByI,GAC5B,OAAOX,EAAsBhG,MAAM9B,KAAMa,YAlEtC,MAwEFgC,EAjeuB,GAoehClE,EAAQE,QAAUgE,I,+CC3flB,IAAI6F,EAAiB,EAAQ,MAEzBC,EAAkB,EAAQ,MAE1BC,EAA6B,EAAQ,KAErCC,EAAkB,EAAQ,MAM9BC,EAAOnK,QAJP,SAAkBoK,GAChB,OAAOL,EAAeK,IAAQJ,EAAgBI,IAAQH,EAA2BG,IAAQF,KAI3FC,EAAOnK,QAAiB,QAAImK,EAAOnK,QAASmK,EAAOnK,QAAQqK,YAAa,G,mCCbxE,YAEAvK,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIqK,EAA4B,oBAAXC,QAAoD,kBAApBA,OAAOC,SAAwB,SAAUC,GAAO,cAAcA,GAAS,SAAUA,GAAO,OAAOA,GAAyB,oBAAXF,QAAyBE,EAAIC,cAAgBH,QAAUE,IAAQF,OAAOI,UAAY,gBAAkBF,GAIlQG,EAA8B,qBAAXC,QAAqD,qBAApBA,OAAOC,SAG3DC,EAA8E,YAA/C,qBAATC,KAAuB,YAAcV,EAAQU,QAAuBA,KAAKN,aAAyC,+BAA1BM,KAAKN,YAAY9E,KAG/H/E,EAA4B,qBAAZoK,GAA+C,MAApBA,EAAQC,UAA6C,MAAzBD,EAAQC,SAASC,KAW5FnL,EAAQ4K,UAAYA,EACpB5K,EAAQ+K,YAAcA,EACtB/K,EAAQa,OAASA,EACjBb,EAAQoL,QAPM,WACZ,MAAyB,qBAAXP,QAA0C,WAAhBA,OAAOjF,MAAqByF,UAAUC,UAAUC,SAAS,YAAcF,UAAUC,UAAUC,SAAS,Y,qDCtB9I,IAAI3L,EAAyBC,EAAQ,IAErCC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAQE,aAAU,EAElB,IAAIQ,EAAmBd,EAAuBC,EAAQ,MAElD2L,EAAa5L,EAAuBC,EAAQ,MAE5C4L,EAA8B7L,EAAuBC,EAAQ,MAE7D6L,EAAmB9L,EAAuBC,EAAQ,MAElD8L,EAAkB9L,EAAQ,KAI9B,SAAS+L,EAAaC,GAAW,IAAIC,EAErC,WAAuC,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EAAO,GAAID,QAAQC,UAAUC,KAAM,OAAO,EAAO,GAAqB,oBAAVC,MAAsB,OAAO,EAAM,IAAiF,OAA3EC,KAAKxB,UAAUtF,SAASiB,KAAKyF,QAAQC,UAAUG,KAAM,IAAI,iBAAyB,EAAQ,MAAOC,GAAK,OAAO,GAFzPC,GAA6B,OAAO,WAAkC,IAAoDC,EAAhDC,GAAQ,EAAIb,EAAiBxL,SAAS2L,GAAkB,GAAIC,EAA2B,CAAE,IAAIU,GAAY,EAAId,EAAiBxL,SAASmB,MAAMqJ,YAAa4B,EAASP,QAAQC,UAAUO,EAAOrK,UAAWsK,QAAqBF,EAASC,EAAMpJ,MAAM9B,KAAMa,WAAc,OAAO,EAAIuJ,EAA4BvL,SAASmB,KAAMiL,IAItc,IAAIG,EAAiC,SAAUC,IAC7C,EAAIlB,EAAWtL,SAASuM,EAAmBC,GAE3C,IAAIC,EAASf,EAAaa,GAE1B,SAASA,EAAkBtI,GACzB,IAAIyI,EAEAxI,EAAQD,EAAKC,MACbE,EAAOH,EAAKG,KACZD,EAAMF,EAAKE,IACXE,EAAUJ,EAAKI,QACfsI,EAAM1I,EAAK0I,IACXC,EAAU3I,EAAK2I,QACfrI,EAAiBN,EAAKM,eAsB1B,OArBA,EAAI/D,EAAiBR,SAASmB,KAAMoL,GACpCG,EAAQD,EAAOrG,KAAKjF,KAAM,CACxB+C,MAAOA,EACPE,KAAMA,EACND,IAAKA,EACLE,QAASA,EACTE,eAAgBA,IAGdL,GAASyI,EACXD,EAAMxI,MAAQ,IAAIuH,EAAgBoB,eAAe,CAC/CC,WAAY5I,EACZ6I,cAAeJ,IAERvI,GAAQwI,IACjBF,EAAMxI,MAAQ,IAAIuH,EAAgBoB,eAAe,CAC/CzI,KAAMA,EACNwI,QAASA,KAINF,EAGT,OAAOH,EAvC4B,CANjB7M,EAAuBC,EAAQ,OA8CnCK,SAEhBF,EAAQE,QAAUuM,G,qDCjElB,IAAI7M,EAAyBC,EAAQ,IAErCC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAQkN,gBAAkBA,EAC1BpN,OAAOC,eAAeC,EAAS,oBAAqB,CAClDmN,YAAY,EACZC,IAAK,WACH,OAAOC,EAAmBnN,WAG9BJ,OAAOC,eAAeC,EAAS,eAAgB,CAC7CmN,YAAY,EACZC,IAAK,WACH,OAAOE,EAAcpN,WAGzBF,EAAQuN,yBAAsB,EAE9B,IAAIhN,EAAeX,EAAuBC,EAAQ,MAE9CY,EAAqBb,EAAuBC,EAAQ,MAEpDa,EAAmBd,EAAuBC,EAAQ,MAElDc,EAAgBf,EAAuBC,EAAQ,MAE/C2N,EAAY5N,EAAuBC,EAAQ,OAE3C4N,EAAU7N,EAAuBC,EAAQ,MAEzC6D,EAAa9D,EAAuBC,EAAQ,OAE5CwN,EAAqBzN,EAAuBC,EAAQ,OAEpDyN,EAAgB1N,EAAuBC,EAAQ,OAOnD,SAASqN,EAAgBlI,GACvB,OAAOA,EAAKM,MAAM,KAAKC,QAAO,SAAUmI,GACtC,MAAO,KAAKjI,KAAKiI,MAChBhI,KAAI,SAAUiI,GACf,IAAIC,EAAmBD,EAAUrI,MAAM,MACnCuI,GAAoB,EAAIL,EAAUtN,SAAS0N,GAC3CE,EAAUD,EAAkB,GAC5BE,EAAWF,EAAkBG,MAAM,GAEnCC,EAAiBH,EAAQxI,MAAM,KAC/B4I,GAAkB,EAAIV,EAAUtN,SAAS+N,GACzCpI,EAAKqI,EAAgB,GACrBC,EAAcD,EAAgBF,MAAM,GAEpCI,EAAWL,EAASM,KAAK,IAAIxE,QAAQ,MAAO,IAChD,MAAO,CACLhE,GAAIA,EACJsI,YAAaA,EAAYE,KAAK,KAC9BD,SAAUA,MAvBXtO,OAAOkG,aAEVyH,EAAQvN,QAAQoO,OA2BlB,IAAIf,EAAmC,WACrC,SAASA,EAAoBpJ,GAC3B,IAAIC,EAAQD,EAAKC,MACbE,EAAOH,EAAKG,MAChB,EAAI5D,EAAiBR,SAASmB,KAAMkM,GAEhCnJ,EACF/C,KAAK+C,MAAQA,EACJE,IACTjD,KAAK+C,MAAQ,IAAIV,EAAWxD,QAAQoE,IAGtCjD,KAAK8D,KAAO9D,KAAK+C,MAAMlD,WAAWqN,MAAK,SAAU1M,GAE/C,OAAOqL,EADIrL,EAAOwD,SAAS,YAiF/B,OA5EA,EAAI1E,EAAcT,SAASqN,EAAqB,CAAC,CAC/C9L,IAAK,QACLxB,MAAO,WACL,IAAIuO,GAAS,EAAI/N,EAAmBP,SAAuBK,EAAaL,QAAQyB,MAAK,SAASC,EAAQiE,EAAIC,EAAOC,GAC/G,IAAIZ,EAAMc,EAAOlE,EACjB,OAAOxB,EAAaL,QAAQiC,MAAK,SAAkBC,GACjD,OACE,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EAEH,OADAF,EAASE,KAAO,EACTjB,KAAK8D,KAEd,KAAK,EAOH,GANAA,EAAO/C,EAASM,KAChBuD,EAAQd,EAAKsJ,MAAK,SAAUC,GAC1B,OAAOA,EAAK7I,KAAOA,KAErB9D,EAASgE,EAAMD,EAEXG,EAAO,CACT7D,EAASE,KAAO,EAChB,MAGF,MAAM,IAAI8C,MAAM,uBAAuBV,OAAOmB,EAAI,YAEpD,KAAK,EACH,OAAOzD,EAASW,OAAO,SAAUkD,EAAMmI,SAASO,OAAO7I,EAAO/D,IAEhE,KAAK,EACL,IAAK,MACH,OAAOK,EAASa,UAGrBrB,EAASP,UAOd,OAJA,SAAe6B,EAAIgD,EAAKK,GACtB,OAAOiI,EAAOrL,MAAM9B,KAAMa,YApCvB,IAyCN,CACDT,IAAK,mBACLxB,MAAO,WACL,IAAIkG,GAAoB,EAAI1F,EAAmBP,SAAuBK,EAAaL,QAAQyB,MAAK,SAAS0B,IACvG,IAAI8B,EACJ,OAAO5E,EAAaL,QAAQiC,MAAK,SAAmBmB,GAClD,OACE,OAAQA,EAAUjB,KAAOiB,EAAUhB,MACjC,KAAK,EAEH,OADAgB,EAAUhB,KAAO,EACVjB,KAAK8D,KAEd,KAAK,EAEH,OADAA,EAAO7B,EAAUZ,KACVY,EAAUP,OAAO,SAAUoC,EAAKO,KAAI,SAAUO,GACnD,OAAOA,EAAMJ,OAGjB,KAAK,EACL,IAAK,MACH,OAAOvC,EAAUL,UAGtBI,EAAUhC,UAOf,OAJA,WACE,OAAO8E,EAAkBhD,MAAM9B,KAAMa,YAzBlC,MA+BFqL,EA9F8B,GAiGvCvN,EAAQuN,oBAAsBA","file":"static/js/7.cfe81dbd.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _require = require('es6-promisify'),\n    promisify = _require.promisify;\n\nvar _require2 = require('browser-or-node'),\n    isNode = _require2.isNode; // don't load fs native module if running in the browser\n\n\nvar fsOpen;\nvar fsRead;\nvar fsFStat;\nvar fsReadFile;\n\nif (isNode) {\n  // eslint-disable-next-line global-require\n  var fs = require('fs');\n\n  fsOpen = fs && promisify(fs.open);\n  fsRead = fs && promisify(fs.read);\n  fsFStat = fs && promisify(fs.fstat);\n  fsReadFile = fs && promisify(fs.readFile);\n}\n\nvar LocalFile = /*#__PURE__*/function () {\n  function LocalFile(source) {\n    (0, _classCallCheck2.default)(this, LocalFile);\n    this.position = 0;\n    this.filename = source;\n    this.fd = fsOpen(this.filename, 'r');\n  }\n\n  (0, _createClass2.default)(LocalFile, [{\n    key: \"read\",\n    value: function () {\n      var _read = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(buffer) {\n        var offset,\n            length,\n            position,\n            readPosition,\n            ret,\n            _args = arguments;\n        return _regenerator.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                offset = _args.length > 1 && _args[1] !== undefined ? _args[1] : 0;\n                length = _args.length > 2 ? _args[2] : undefined;\n                position = _args.length > 3 ? _args[3] : undefined;\n                readPosition = position;\n\n                if (readPosition === null) {\n                  readPosition = this.position;\n                  this.position += length;\n                }\n\n                _context.t0 = fsRead;\n                _context.next = 8;\n                return this.fd;\n\n              case 8:\n                _context.t1 = _context.sent;\n                _context.t2 = buffer;\n                _context.t3 = offset;\n                _context.t4 = length;\n                _context.t5 = position;\n                _context.next = 15;\n                return (0, _context.t0)(_context.t1, _context.t2, _context.t3, _context.t4, _context.t5);\n\n              case 15:\n                ret = _context.sent;\n\n                if (!((0, _typeof2.default)(ret) === 'object')) {\n                  _context.next = 18;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", ret.bytesRead);\n\n              case 18:\n                return _context.abrupt(\"return\", ret);\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function read(_x) {\n        return _read.apply(this, arguments);\n      }\n\n      return read;\n    }()\n  }, {\n    key: \"readFile\",\n    value: function () {\n      var _readFile = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", fsReadFile(this.filename));\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function readFile() {\n        return _readFile.apply(this, arguments);\n      }\n\n      return readFile;\n    }()\n  }, {\n    key: \"stat\",\n    value: function () {\n      var _stat = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3() {\n        return _regenerator.default.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (this._stat) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                _context3.t0 = fsFStat;\n                _context3.next = 4;\n                return this.fd;\n\n              case 4:\n                _context3.t1 = _context3.sent;\n                _context3.next = 7;\n                return (0, _context3.t0)(_context3.t1);\n\n              case 7:\n                this._stat = _context3.sent;\n\n              case 8:\n                return _context3.abrupt(\"return\", this._stat);\n\n              case 9:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function stat() {\n        return _stat.apply(this, arguments);\n      }\n\n      return stat;\n    }()\n  }]);\n  return LocalFile;\n}();\n\nexports.default = LocalFile;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _localFile = _interopRequireDefault(require(\"./localFile\"));\n\nfunction _faiOffset(idx, pos) {\n  return idx.offset + idx.lineBytes * Math.floor(pos / idx.lineLength) + pos % idx.lineLength;\n}\n\nvar IndexedFasta = /*#__PURE__*/function () {\n  function IndexedFasta(_ref) {\n    var fasta = _ref.fasta,\n        fai = _ref.fai,\n        path = _ref.path,\n        faiPath = _ref.faiPath,\n        _ref$chunkSizeLimit = _ref.chunkSizeLimit,\n        chunkSizeLimit = _ref$chunkSizeLimit === void 0 ? 1000000 : _ref$chunkSizeLimit;\n    (0, _classCallCheck2.default)(this, IndexedFasta);\n\n    if (fasta) {\n      this.fasta = fasta;\n    } else if (path) {\n      this.fasta = new _localFile.default(path);\n    }\n\n    if (fai) {\n      this.fai = fai;\n    } else if (faiPath) {\n      this.fai = new _localFile.default(faiPath);\n    } else if (path) {\n      this.fai = new _localFile.default(\"\".concat(path, \".fai\"));\n    }\n\n    this.chunkSizeLimit = chunkSizeLimit;\n  }\n\n  (0, _createClass2.default)(IndexedFasta, [{\n    key: \"_getIndexes\",\n    value: function () {\n      var _getIndexes2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(opts) {\n        return _regenerator.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (this.indexes) {\n                  _context.next = 4;\n                  break;\n                }\n\n                _context.next = 3;\n                return this._readFAI(opts);\n\n              case 3:\n                this.indexes = _context.sent;\n\n              case 4:\n                return _context.abrupt(\"return\", this.indexes);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function _getIndexes(_x) {\n        return _getIndexes2.apply(this, arguments);\n      }\n\n      return _getIndexes;\n    }()\n  }, {\n    key: \"_readFAI\",\n    value: function () {\n      var _readFAI2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(opts) {\n        var text, idCounter, currSeq, data;\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.fai.readFile(opts);\n\n              case 2:\n                text = _context2.sent;\n\n                if (text && text.length) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                throw new Error('No data read from FASTA index (FAI) file');\n\n              case 5:\n                idCounter = 0;\n                data = text.toString('utf8').split(/\\r?\\n/).filter(function (line) {\n                  return /\\S/.test(line);\n                }).map(function (line) {\n                  return line.split('\\t');\n                }).filter(function (row) {\n                  return row[0] !== '';\n                }).map(function (row) {\n                  if (!currSeq || currSeq.name !== row[0]) {\n                    currSeq = {\n                      name: row[0],\n                      id: idCounter\n                    };\n                    idCounter += 1;\n                  }\n\n                  return {\n                    id: currSeq.id,\n                    name: row[0],\n                    length: +row[1],\n                    start: 0,\n                    end: +row[1],\n                    offset: +row[2],\n                    lineLength: +row[3],\n                    lineBytes: +row[4]\n                  };\n                });\n                return _context2.abrupt(\"return\", {\n                  name: Object.fromEntries(data.map(function (entry) {\n                    return [entry.name, entry];\n                  })),\n                  id: Object.fromEntries(data.map(function (entry) {\n                    return [entry.id, entry];\n                  }))\n                });\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function _readFAI(_x2) {\n        return _readFAI2.apply(this, arguments);\n      }\n\n      return _readFAI;\n    }()\n    /**\n     * @returns {array[string]} array of string sequence\n     * names that are present in the index, in which the\n     * array index indicates the sequence ID, and the value\n     * is the sequence name\n     */\n\n  }, {\n    key: \"getSequenceNames\",\n    value: function () {\n      var _getSequenceNames = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3(opts) {\n        return _regenerator.default.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.t0 = Object;\n                _context3.next = 3;\n                return this._getIndexes(opts);\n\n              case 3:\n                _context3.t1 = _context3.sent.name;\n                return _context3.abrupt(\"return\", _context3.t0.keys.call(_context3.t0, _context3.t1));\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getSequenceNames(_x3) {\n        return _getSequenceNames.apply(this, arguments);\n      }\n\n      return getSequenceNames;\n    }()\n    /**\n     * @returns {array[string]} array of string sequence\n     * names that are present in the index, in which the\n     * array index indicates the sequence ID, and the value\n     * is the sequence name\n     */\n\n  }, {\n    key: \"getSequenceSizes\",\n    value: function () {\n      var _getSequenceSizes = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee4(opts) {\n        var returnObject, idx, vals, i;\n        return _regenerator.default.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                returnObject = {};\n                _context4.next = 3;\n                return this._getIndexes(opts);\n\n              case 3:\n                idx = _context4.sent;\n                vals = Object.values(idx.id);\n\n                for (i = 0; i < vals.length; i += 1) {\n                  returnObject[vals[i].name] = vals[i].length;\n                }\n\n                return _context4.abrupt(\"return\", returnObject);\n\n              case 7:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function getSequenceSizes(_x4) {\n        return _getSequenceSizes.apply(this, arguments);\n      }\n\n      return getSequenceSizes;\n    }()\n    /**\n     * @returns {array[string]} array of string sequence\n     * names that are present in the index, in which the\n     * array index indicates the sequence ID, and the value\n     * is the sequence name\n     */\n\n  }, {\n    key: \"getSequenceSize\",\n    value: function () {\n      var _getSequenceSize = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee5(seqName, opts) {\n        var idx;\n        return _regenerator.default.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this._getIndexes(opts);\n\n              case 2:\n                idx = _context5.sent;\n                return _context5.abrupt(\"return\", (idx.name[seqName] || {}).length);\n\n              case 4:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function getSequenceSize(_x5, _x6) {\n        return _getSequenceSize.apply(this, arguments);\n      }\n\n      return getSequenceSize;\n    }()\n    /**\n     *\n     * @param {string} name\n     * @returns {Promise[boolean]} true if the file contains the given reference sequence name\n     */\n\n  }, {\n    key: \"hasReferenceSequence\",\n    value: function () {\n      var _hasReferenceSequence = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee6(name, opts) {\n        return _regenerator.default.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return this._getIndexes(opts);\n\n              case 2:\n                _context6.t0 = name;\n                return _context6.abrupt(\"return\", !!_context6.sent.name[_context6.t0]);\n\n              case 4:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function hasReferenceSequence(_x7, _x8) {\n        return _hasReferenceSequence.apply(this, arguments);\n      }\n\n      return hasReferenceSequence;\n    }()\n    /**\n     *\n     * @param {number} seqId\n     * @param {number} min\n     * @param {number} max\n     */\n\n  }, {\n    key: \"getResiduesById\",\n    value: function () {\n      var _getResiduesById = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee7(seqId, min, max, opts) {\n        var indexEntry;\n        return _regenerator.default.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.next = 2;\n                return this._getIndexes(opts);\n\n              case 2:\n                _context7.t0 = seqId;\n                indexEntry = _context7.sent.id[_context7.t0];\n\n                if (indexEntry) {\n                  _context7.next = 6;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", undefined);\n\n              case 6:\n                return _context7.abrupt(\"return\", this._fetchFromIndexEntry(indexEntry, min, max));\n\n              case 7:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function getResiduesById(_x9, _x10, _x11, _x12) {\n        return _getResiduesById.apply(this, arguments);\n      }\n\n      return getResiduesById;\n    }()\n    /**\n     * @param {string} seqName\n     * @param {number} min\n     * @param {number} max\n     */\n\n  }, {\n    key: \"getResiduesByName\",\n    value: function () {\n      var _getResiduesByName = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee8(seqName, min, max, opts) {\n        var indexEntry;\n        return _regenerator.default.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.next = 2;\n                return this._getIndexes(opts);\n\n              case 2:\n                _context8.t0 = seqName;\n                indexEntry = _context8.sent.name[_context8.t0];\n\n                if (indexEntry) {\n                  _context8.next = 6;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\", undefined);\n\n              case 6:\n                return _context8.abrupt(\"return\", this._fetchFromIndexEntry(indexEntry, min, max, opts));\n\n              case 7:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function getResiduesByName(_x13, _x14, _x15, _x16) {\n        return _getResiduesByName.apply(this, arguments);\n      }\n\n      return getResiduesByName;\n    }()\n  }, {\n    key: \"getSequence\",\n    value: function () {\n      var _getSequence = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee9() {\n        var _args9 = arguments;\n        return _regenerator.default.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                return _context9.abrupt(\"return\", this.getResiduesByName.apply(this, _args9));\n\n              case 1:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function getSequence() {\n        return _getSequence.apply(this, arguments);\n      }\n\n      return getSequence;\n    }()\n  }, {\n    key: \"_fetchFromIndexEntry\",\n    value: function () {\n      var _fetchFromIndexEntry2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee10(indexEntry) {\n        var min,\n            max,\n            opts,\n            end,\n            position,\n            readlen,\n            residues,\n            _args10 = arguments;\n        return _regenerator.default.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                min = _args10.length > 1 && _args10[1] !== undefined ? _args10[1] : 0;\n                max = _args10.length > 2 ? _args10[2] : undefined;\n                opts = _args10.length > 3 ? _args10[3] : undefined;\n                end = max;\n\n                if (!(min < 0)) {\n                  _context10.next = 6;\n                  break;\n                }\n\n                throw new TypeError('regionStart cannot be less than 0');\n\n              case 6:\n                if (end === undefined || end > indexEntry.length) {\n                  end = indexEntry.length;\n                }\n\n                if (!(min >= end)) {\n                  _context10.next = 9;\n                  break;\n                }\n\n                return _context10.abrupt(\"return\", '');\n\n              case 9:\n                position = _faiOffset(indexEntry, min);\n                readlen = _faiOffset(indexEntry, end) - position;\n\n                if (!(readlen > this.chunkSizeLimit)) {\n                  _context10.next = 13;\n                  break;\n                }\n\n                throw new Error(\"data size of \".concat(readlen.toLocaleString(), \" bytes exceeded chunk size limit of \").concat(this.chunkSizeLimit.toLocaleString(), \" bytes\"));\n\n              case 13:\n                residues = Buffer.allocUnsafe(readlen);\n                _context10.next = 16;\n                return this.fasta.read(residues, 0, readlen, position, opts);\n\n              case 16:\n                return _context10.abrupt(\"return\", residues.toString('utf8').replace(/\\s+/g, ''));\n\n              case 17:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function _fetchFromIndexEntry(_x17) {\n        return _fetchFromIndexEntry2.apply(this, arguments);\n      }\n\n      return _fetchFromIndexEntry;\n    }()\n  }]);\n  return IndexedFasta;\n}();\n\nexports.default = IndexedFasta;","var arrayWithHoles = require(\"./arrayWithHoles.js\");\n\nvar iterableToArray = require(\"./iterableToArray.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableRest = require(\"./nonIterableRest.js\");\n\nfunction _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}\n\nmodule.exports = _toArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/* global window self */\n\nvar isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n\n/* eslint-disable no-restricted-globals */\nvar isWebWorker = (typeof self === 'undefined' ? 'undefined' : _typeof(self)) === 'object' && self.constructor && self.constructor.name === 'DedicatedWorkerGlobalScope';\n/* eslint-enable no-restricted-globals */\n\nvar isNode = typeof process !== 'undefined' && process.versions != null && process.versions.node != null;\n\n/**\n * @see https://github.com/jsdom/jsdom/releases/tag/12.0.0\n * @see https://github.com/jsdom/jsdom/issues/1537\n */\n/* eslint-disable no-undef */\nvar isJsDom = function isJsDom() {\n  return typeof window !== 'undefined' && window.name === 'nodejs' || navigator.userAgent.includes('Node.js') || navigator.userAgent.includes('jsdom');\n};\n\nexports.isBrowser = isBrowser;\nexports.isWebWorker = isWebWorker;\nexports.isNode = isNode;\nexports.isJsDom = isJsDom;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _bgzfFilehandle = require(\"@gmod/bgzf-filehandle\");\n\nvar _indexedFasta = _interopRequireDefault(require(\"./indexedFasta\"));\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar BgzipIndexedFasta = /*#__PURE__*/function (_IndexedFasta) {\n  (0, _inherits2.default)(BgzipIndexedFasta, _IndexedFasta);\n\n  var _super = _createSuper(BgzipIndexedFasta);\n\n  function BgzipIndexedFasta(_ref) {\n    var _this;\n\n    var fasta = _ref.fasta,\n        path = _ref.path,\n        fai = _ref.fai,\n        faiPath = _ref.faiPath,\n        gzi = _ref.gzi,\n        gziPath = _ref.gziPath,\n        chunkSizeLimit = _ref.chunkSizeLimit;\n    (0, _classCallCheck2.default)(this, BgzipIndexedFasta);\n    _this = _super.call(this, {\n      fasta: fasta,\n      path: path,\n      fai: fai,\n      faiPath: faiPath,\n      chunkSizeLimit: chunkSizeLimit\n    });\n\n    if (fasta && gzi) {\n      _this.fasta = new _bgzfFilehandle.BgzfFilehandle({\n        filehandle: fasta,\n        gziFilehandle: gzi\n      });\n    } else if (path && gziPath) {\n      _this.fasta = new _bgzfFilehandle.BgzfFilehandle({\n        path: path,\n        gziPath: gziPath\n      });\n    }\n\n    return _this;\n  }\n\n  return BgzipIndexedFasta;\n}(_indexedFasta.default);\n\nexports.default = BgzipIndexedFasta;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parseSmallFasta = parseSmallFasta;\nObject.defineProperty(exports, \"BgzipIndexedFasta\", {\n  enumerable: true,\n  get: function get() {\n    return _bgzipIndexedFasta.default;\n  }\n});\nObject.defineProperty(exports, \"IndexedFasta\", {\n  enumerable: true,\n  get: function get() {\n    return _indexedFasta.default;\n  }\n});\nexports.FetchableSmallFasta = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _toArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toArray\"));\n\nvar _object = _interopRequireDefault(require(\"object.fromentries\"));\n\nvar _localFile = _interopRequireDefault(require(\"./localFile\"));\n\nvar _bgzipIndexedFasta = _interopRequireDefault(require(\"./bgzipIndexedFasta\"));\n\nvar _indexedFasta = _interopRequireDefault(require(\"./indexedFasta\"));\n\nif (!Object.fromEntries) {\n  // @ts-ignore\n  _object.default.shim();\n}\n\nfunction parseSmallFasta(text) {\n  return text.split('>').filter(function (t) {\n    return /\\S/.test(t);\n  }).map(function (entryText) {\n    var _entryText$split = entryText.split('\\n'),\n        _entryText$split2 = (0, _toArray2.default)(_entryText$split),\n        defLine = _entryText$split2[0],\n        seqLines = _entryText$split2.slice(1);\n\n    var _defLine$split = defLine.split(' '),\n        _defLine$split2 = (0, _toArray2.default)(_defLine$split),\n        id = _defLine$split2[0],\n        description = _defLine$split2.slice(1);\n\n    var sequence = seqLines.join('').replace(/\\s/g, '');\n    return {\n      id: id,\n      description: description.join(' '),\n      sequence: sequence\n    };\n  });\n} // memoized\n\n\nvar FetchableSmallFasta = /*#__PURE__*/function () {\n  function FetchableSmallFasta(_ref) {\n    var fasta = _ref.fasta,\n        path = _ref.path;\n    (0, _classCallCheck2.default)(this, FetchableSmallFasta);\n\n    if (fasta) {\n      this.fasta = fasta;\n    } else if (path) {\n      this.fasta = new _localFile.default(path);\n    }\n\n    this.data = this.fasta.readFile().then(function (buffer) {\n      var text = buffer.toString('utf8');\n      return parseSmallFasta(text);\n    });\n  }\n\n  (0, _createClass2.default)(FetchableSmallFasta, [{\n    key: \"fetch\",\n    value: function () {\n      var _fetch = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(id, start, end) {\n        var data, entry, length;\n        return _regenerator.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.data;\n\n              case 2:\n                data = _context.sent;\n                entry = data.find(function (iter) {\n                  return iter.id === id;\n                });\n                length = end - start;\n\n                if (entry) {\n                  _context.next = 7;\n                  break;\n                }\n\n                throw new Error(\"no sequence with id \".concat(id, \" exists\"));\n\n              case 7:\n                return _context.abrupt(\"return\", entry.sequence.substr(start, length));\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function fetch(_x, _x2, _x3) {\n        return _fetch.apply(this, arguments);\n      }\n\n      return fetch;\n    }()\n  }, {\n    key: \"getSequenceNames\",\n    value: function () {\n      var _getSequenceNames = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n        var data;\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.data;\n\n              case 2:\n                data = _context2.sent;\n                return _context2.abrupt(\"return\", data.map(function (entry) {\n                  return entry.id;\n                }));\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getSequenceNames() {\n        return _getSequenceNames.apply(this, arguments);\n      }\n\n      return getSequenceNames;\n    }()\n  }]);\n  return FetchableSmallFasta;\n}();\n\nexports.FetchableSmallFasta = FetchableSmallFasta;"],"sourceRoot":""}