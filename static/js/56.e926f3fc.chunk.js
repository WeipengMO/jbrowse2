(this["webpackJsonp@jbrowse/web"]=this["webpackJsonp@jbrowse/web"]||[]).push([[56],{2507:function(e,a,t){"use strict";t.r(a);var n=t(92),r=t(83),c=t(1),l=t.n(c),s=t(51),o=t(2394),i=t(2448),p=t(2444),d=t(2445),m=t(2447),u=t(2391),g=t(84),f=t(82),b=t(85),h=t(2443),y=t(2389),k=t(2401),v=t(88),E=t(138),w=Object(s.a)((function(e){return{spacing:{marginBottom:e.spacing(3)}}}));function N(e){var a,t=e.trackAdapter,n=e.trackType,r=w();return"SNPCoverageAdapter"===t.type?l.a.createElement(o.a,{className:r.spacing},"Selected ",l.a.createElement("code",null,n),". Using adapter"," ",l.a.createElement("code",null,t.type)," with subadapter"," ",l.a.createElement("code",null,null===(a=t.subadapter)||void 0===a?void 0:a.type),". Please enter a track name and, if necessary, update the track type."):l.a.createElement(o.a,{className:r.spacing},"Using adapter ",l.a.createElement("code",null,t.type)," and guessing track type"," ",l.a.createElement("code",null,n),". Please enter a track name and, if necessary, update the track type.")}function T(e){var a=e.adapterHint,t=e.model,n=w(),r=Object(g.getSession)(t);return l.a.createElement(k.a,{className:n.spacing,value:a,label:"adapterType",helperText:"An adapter type",select:!0,fullWidth:!0,onChange:function(e){t.setAdapterHint(e.target.value)},SelectProps:{SelectDisplayProps:{"data-testid":"adapterTypeSelect"}}},Object(v.getEnv)(r).pluginManager.getElementTypesInGroup("adapter").filter((function(e){return"SNPCoverageAdapter"!==e.name})).map((function(e){return l.a.createElement(y.a,{key:e.name,value:e.name},e.name)})))}function O(e){var a=e.model,t=w(),n=a.adapterHint;return l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a,{className:t.spacing},"Was not able to guess the adapter type for this data, but it may be in the list below. If not, you can"," ",l.a.createElement(h.a,{href:"https://github.com/GMOD/jbrowse-components/releases",target:"_blank",rel:"noopener noreferrer"},"check for new releases")," ","of JBrowse to see if they support this data type or"," ",l.a.createElement(h.a,{href:"https://github.com/GMOD/jbrowse-components/issues/new",target:"_blank",rel:"noopener noreferrer"},"file an issue")," ","and add a feature request for this data type."),l.a.createElement(T,{adapterHint:n,model:a}))}var j=Object(b.observer)((function(e){var a=e.model,t=w(),n=Object(g.getSession)(a),r=a.trackName,c=a.trackAdapter,s=a.trackType,i=a.assembly,p=a.warningMessage,d=a.adapterHint;return a.unsupported?l.a.createElement(o.a,{className:t.spacing},"This version of JBrowse cannot display data of this type. It is possible, however, that there is a newer version that can display them. You can"," ",l.a.createElement(h.a,{href:"https://github.com/GMOD/jbrowse-components/releases",target:"_blank",rel:"noopener noreferrer"},"check for new releases")," ","of JBrowse or"," ",l.a.createElement(h.a,{href:"https://github.com/GMOD/jbrowse-components/issues/new",target:"_blank",rel:"noopener noreferrer"},"file an issue")," ","and add a feature request for this data type."):(null===c||void 0===c?void 0:c.type)===E.UNKNOWN?l.a.createElement(O,{model:a}):(null===c||void 0===c?void 0:c.type)?l.a.createElement(l.a.Fragment,null,c?l.a.createElement(N,{trackAdapter:c,trackType:s}):null,p?l.a.createElement(o.a,{style:{color:"orange"}},p):null,l.a.createElement(T,{adapterHint:d,model:a}),l.a.createElement(k.a,{className:t.spacing,label:"trackName",helperText:"A name for this track",fullWidth:!0,value:r,onChange:function(e){return a.setTrackName(e.target.value)},inputProps:{"data-testid":"trackNameInput"}}),l.a.createElement(k.a,{className:t.spacing,value:s,label:"trackType",helperText:"A track type",select:!0,fullWidth:!0,onChange:function(e){a.setTrackType(e.target.value)},SelectProps:{SelectDisplayProps:{"data-testid":"trackTypeSelect"}}},Object(v.getEnv)(n).pluginManager.getElementTypesInGroup("track").map((function(e){var a=e.name;return l.a.createElement(y.a,{key:a,value:a},a)}))),l.a.createElement(k.a,{value:i,label:"assemblyName",helperText:"Assembly to which the track will be added",select:!0,fullWidth:!0,onChange:function(e){a.setAssembly(e.target.value)},SelectProps:{SelectDisplayProps:{"data-testid":"assemblyNameSelect"}}},n.assemblies.map((function(e){var a=Object(f.readConfObject)(e,"name");return l.a.createElement(y.a,{key:a,value:a},a)})))):l.a.createElement(o.a,null,"Could not recognize this data type.")})),C=t(130),S=t(2386),x=Object(s.a)((function(e){return{root:{display:"flex",flexDirection:"column"},paper:{padding:e.spacing(1)}}}));var A=function(e){var a=e.model,t=x();return l.a.createElement("div",{className:t.root},l.a.createElement(S.a,{className:t.paper},l.a.createElement(C.FileSelector,{name:"Main file",description:"",location:a.trackData,setLocation:a.setTrackData}),l.a.createElement(C.FileSelector,{name:"Index file",description:"Automatically inferred from the URL if not supplied",location:a.indexTrackData,setLocation:a.setIndexTrackData})))},D=t(2500),P=Object(s.a)((function(e){return{root:{marginTop:e.spacing(1)},stepper:{backgroundColor:e.palette.background.default},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)},stepContent:{margin:e.spacing(1)},alertContainer:{padding:"".concat(e.spacing(2),"px 0px ").concat(e.spacing(2),"px 0px")}}})),M=["Enter track data","Confirm track type"];a.default=Object(b.observer)((function(e){var a=e.model,t=Object(c.useState)(0),s=Object(r.a)(t,2),b=s[0],h=s[1],y=P(),k=Object(g.getSession)(a),v=a.assembly,E=a.trackAdapter,w=a.trackData,N=a.trackName,T=a.trackType,O=Object(c.useState)(),C=Object(r.a)(O,2),S=C[0],x=C[1];function I(){if(b===M.length-1){var e="".concat(N.toLowerCase().replace(/ /g,"_"),"-").concat(Date.now()).concat(k.adminMode?"":"-sessionTrack"),t=k.assemblyManager.get(v);E&&"UNKNOWN"!==E.type?(k.addTrackConf({trackId:e,type:T,name:N,assemblyNames:[v],adapter:Object(n.a)(Object(n.a)({},E),{},{sequenceAdapter:Object(f.getConf)(t,["sequence","adapter"])})}),a.view?a.view.showTrack(e):k.notify("Open a new view, or use the track selector in an existing view, to view this track","info"),a.clearData(),k.hideWidget(a)):x("Failed to add track.\nThe configuration of this file is not currently supported.")}else h(b+1)}function W(){x(void 0),h(b-1)}function B(){switch(b){case 0:return!w;case 1:return!(N&&T&&(null===E||void 0===E?void 0:E.type)&&v);default:return!0}}return l.a.createElement("div",{className:y.root},l.a.createElement(i.a,{className:y.stepper,activeStep:b,orientation:"vertical"},M.map((function(e,t){return l.a.createElement(p.a,{key:e},l.a.createElement(d.a,null,e),l.a.createElement(m.a,null,function(e){switch(e){case 0:return l.a.createElement(A,{model:a});case 1:return l.a.createElement(j,{model:a});default:return l.a.createElement(o.a,null,"Unknown step")}}(t),l.a.createElement("div",{className:y.actionsContainer},l.a.createElement(u.a,{disabled:0===b,onClick:W,className:y.button},"Back"),l.a.createElement(u.a,{disabled:B(),variant:"contained",color:"primary",onClick:I,className:y.button,"data-testid":"addTrackNextButton"},b===M.length-1?"Add":"Next")),S?l.a.createElement("div",{className:y.alertContainer},l.a.createElement(D.a,{severity:"error"},S)):null))}))))}))}}]);
//# sourceMappingURL=56.e926f3fc.chunk.js.map