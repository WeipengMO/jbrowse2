(this["webpackJsonp@jbrowse/web"]=this["webpackJsonp@jbrowse/web"]||[]).push([[7,44],{1285:function(e,t,n){"use strict";var r=n(86);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,u,i,s,f=r(n(168)),c=r(n(354)),o=r(n(169)),l=r(n(110)),d=r(n(120)),p=n(427).promisify;if(n(2348).isNode){var h=n(565);a=h&&p(h.open),u=h&&p(h.read),i=h&&p(h.fstat),s=h&&p(h.readFile)}var v=function(){function e(t){(0,l.default)(this,e),this.position=0,this.filename=t,this.fd=a(this.filename,"r")}return(0,d.default)(e,[{key:"read",value:function(){var e=(0,o.default)(f.default.mark((function e(t){var n,r,a,i,s=arguments;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:0,r=s.length>2?s[2]:void 0,a=s.length>3?s[3]:void 0,null===a&&(this.position,this.position+=r),e.t0=u,e.next=8,this.fd;case 8:return e.t1=e.sent,e.t2=t,e.t3=n,e.t4=r,e.t5=a,e.next=15,(0,e.t0)(e.t1,e.t2,e.t3,e.t4,e.t5);case 15:if(i=e.sent,"object"!==(0,c.default)(i)){e.next=18;break}return e.abrupt("return",i.bytesRead);case 18:return e.abrupt("return",i);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readFile",value:function(){var e=(0,o.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s(this.filename));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stat",value:function(){var e=(0,o.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._stat){e.next=8;break}return e.t0=i,e.next=4,this.fd;case 4:return e.t1=e.sent,e.next=7,(0,e.t0)(e.t1);case 7:this._stat=e.sent;case 8:return e.abrupt("return",this._stat);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();t.default=v},1286:function(e,t,n){"use strict";(function(e){var r=n(86);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(168)),u=r(n(169)),i=r(n(110)),s=r(n(120)),f=r(n(1285));function c(e,t){return e.offset+e.lineBytes*Math.floor(t/e.lineLength)+t%e.lineLength}var o=function(){function t(e){var n=e.fasta,r=e.fai,a=e.path,u=e.faiPath,s=e.chunkSizeLimit,c=void 0===s?1e6:s;(0,i.default)(this,t),n?this.fasta=n:a&&(this.fasta=new f.default(a)),r?this.fai=r:u?this.fai=new f.default(u):a&&(this.fai=new f.default("".concat(a,".fai"))),this.chunkSizeLimit=c}return(0,s.default)(t,[{key:"_getIndexes",value:function(){var e=(0,u.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.indexes){e.next=4;break}return e.next=3,this._readFAI(t);case 3:this.indexes=e.sent;case 4:return e.abrupt("return",this.indexes);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_readFAI",value:function(){var e=(0,u.default)(a.default.mark((function e(t){var n,r,u,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fai.readFile(t);case 2:if((n=e.sent)&&n.length){e.next=5;break}throw new Error("No data read from FASTA index (FAI) file");case 5:return r=0,i=n.toString("utf8").split(/\r?\n/).filter((function(e){return/\S/.test(e)})).map((function(e){return e.split("\t")})).filter((function(e){return""!==e[0]})).map((function(e){return u&&u.name===e[0]||(u={name:e[0],id:r},r+=1),{id:u.id,name:e[0],length:+e[1],start:0,end:+e[1],offset:+e[2],lineLength:+e[3],lineBytes:+e[4]}})),e.abrupt("return",{name:Object.fromEntries(i.map((function(e){return[e.name,e]}))),id:Object.fromEntries(i.map((function(e){return[e.id,e]})))});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSequenceNames",value:function(){var e=(0,u.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Object,e.next=3,this._getIndexes(t);case 3:return e.t1=e.sent.name,e.abrupt("return",e.t0.keys.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSequenceSizes",value:function(){var e=(0,u.default)(a.default.mark((function e(t){var n,r,u,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,this._getIndexes(t);case 3:for(r=e.sent,u=Object.values(r.id),i=0;i<u.length;i+=1)n[u[i].name]=u[i].length;return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSequenceSize",value:function(){var e=(0,u.default)(a.default.mark((function e(t,n){var r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getIndexes(n);case 2:return r=e.sent,e.abrupt("return",(r.name[t]||{}).length);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"hasReferenceSequence",value:function(){var e=(0,u.default)(a.default.mark((function e(t,n){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getIndexes(n);case 2:return e.t0=t,e.abrupt("return",!!e.sent.name[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getResiduesById",value:function(){var e=(0,u.default)(a.default.mark((function e(t,n,r,u){var i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getIndexes(u);case 2:if(e.t0=t,i=e.sent.id[e.t0]){e.next=6;break}return e.abrupt("return",void 0);case 6:return e.abrupt("return",this._fetchFromIndexEntry(i,n,r));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"getResiduesByName",value:function(){var e=(0,u.default)(a.default.mark((function e(t,n,r,u){var i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getIndexes(u);case 2:if(e.t0=t,i=e.sent.name[e.t0]){e.next=6;break}return e.abrupt("return",void 0);case 6:return e.abrupt("return",this._fetchFromIndexEntry(i,n,r,u));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"getSequence",value:function(){var e=(0,u.default)(a.default.mark((function e(){var t=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getResiduesByName.apply(this,t));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_fetchFromIndexEntry",value:function(){var t=(0,u.default)(a.default.mark((function t(n){var r,u,i,s,f,o,l,d=arguments;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:0,u=d.length>2?d[2]:void 0,i=d.length>3?d[3]:void 0,s=u,!(r<0)){t.next=6;break}throw new TypeError("regionStart cannot be less than 0");case 6:if((void 0===s||s>n.length)&&(s=n.length),!(r>=s)){t.next=9;break}return t.abrupt("return","");case 9:if(f=c(n,r),!((o=c(n,s)-f)>this.chunkSizeLimit)){t.next=13;break}throw new Error("data size of ".concat(o.toLocaleString()," bytes exceeded chunk size limit of ").concat(this.chunkSizeLimit.toLocaleString()," bytes"));case 13:return l=e.allocUnsafe(o),t.next=16,this.fasta.read(l,0,o,f,i);case 16:return t.abrupt("return",l.toString("utf8").replace(/\s+/g,""));case 17:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}();t.default=o}).call(this,n(109).Buffer)},2347:function(e,t,n){var r=n(1046),a=n(1008),u=n(688),i=n(1047);e.exports=function(e){return r(e)||a(e)||u(e)||i()},e.exports.default=e.exports,e.exports.__esModule=!0},2348:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r="undefined"!==typeof window&&"undefined"!==typeof window.document,a="object"===("undefined"===typeof self?"undefined":n(self))&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,u="undefined"!==typeof e&&null!=e.versions&&null!=e.versions.node;t.isBrowser=r,t.isWebWorker=a,t.isNode=u,t.isJsDom=function(){return"undefined"!==typeof window&&"nodejs"===window.name||navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")}}).call(this,n(175))},2349:function(e,t,n){"use strict";var r=n(86);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(110)),u=r(n(257)),i=r(n(258)),s=r(n(221)),f=n(290);function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.default)(this,n)}}var o=function(e){(0,u.default)(n,e);var t=c(n);function n(e){var r,u=e.fasta,i=e.path,s=e.fai,c=e.faiPath,o=e.gzi,l=e.gziPath,d=e.chunkSizeLimit;return(0,a.default)(this,n),r=t.call(this,{fasta:u,path:i,fai:s,faiPath:c,chunkSizeLimit:d}),u&&o?r.fasta=new f.BgzfFilehandle({filehandle:u,gziFilehandle:o}):i&&l&&(r.fasta=new f.BgzfFilehandle({path:i,gziPath:l})),r}return n}(r(n(1286)).default);t.default=o},565:function(e,t){},858:function(e,t,n){"use strict";var r=n(86);Object.defineProperty(t,"__esModule",{value:!0}),t.parseSmallFasta=p,Object.defineProperty(t,"BgzipIndexedFasta",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"IndexedFasta",{enumerable:!0,get:function(){return d.default}}),t.FetchableSmallFasta=void 0;var a=r(n(168)),u=r(n(169)),i=r(n(110)),s=r(n(120)),f=r(n(2347)),c=r(n(987)),o=r(n(1285)),l=r(n(2349)),d=r(n(1286));function p(e){return e.split(">").filter((function(e){return/\S/.test(e)})).map((function(e){var t=e.split("\n"),n=(0,f.default)(t),r=n[0],a=n.slice(1),u=r.split(" "),i=(0,f.default)(u),s=i[0],c=i.slice(1),o=a.join("").replace(/\s/g,"");return{id:s,description:c.join(" "),sequence:o}}))}Object.fromEntries||c.default.shim();var h=function(){function e(t){var n=t.fasta,r=t.path;(0,i.default)(this,e),n?this.fasta=n:r&&(this.fasta=new o.default(r)),this.data=this.fasta.readFile().then((function(e){return p(e.toString("utf8"))}))}return(0,s.default)(e,[{key:"fetch",value:function(){var e=(0,u.default)(a.default.mark((function e(t,n,r){var u,i,s;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data;case 2:if(u=e.sent,i=u.find((function(e){return e.id===t})),s=r-n,i){e.next=7;break}throw new Error("no sequence with id ".concat(t," exists"));case 7:return e.abrupt("return",i.sequence.substr(n,s));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getSequenceNames",value:function(){var e=(0,u.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data;case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return e.id})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();t.FetchableSmallFasta=h}}]);
//# sourceMappingURL=7.cfe81dbd.chunk.js.map